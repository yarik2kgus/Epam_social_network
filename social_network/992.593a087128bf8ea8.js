"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[992],{992:($,_,o)=>{o.r(_),o.d(_,{default:()=>Y});var e=o(5678),d=o(6814),g=o(9281),p=o(95),b=o(7715),k=o(7398),v=o(9397),C=o(8180),S=o(6306),P=o(4664),T=o(3500),a=o(7110),c=o(9685);let x=(()=>{class i{constructor(){this.stepperConfig=(0,e.tdS)(c.wd)}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const m=i=>({"active-step":i});let y=(()=>{class i{constructor(t){this.stepperService=t,this.stepperSteps=c.xb}onStepButtonClick(t){this.stepperService.stepperConfig.update(n=>({...n,activeStep:t}))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["epm-stepper"]],standalone:!0,features:[e.jDz],decls:6,vars:11,consts:[[1,"stepper__wrapper"],[1,"stepper__divider"],[1,"stepper__step","first-step","passed-step",3,"ngClass","click"],[1,"stepper__step","second-step","passed-step",3,"ngClass","disabled","click"],[1,"stepper__step","third-step","passed-step",3,"ngClass","disabled","click"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"span",1)(2,"button",2),e.NdJ("click",function(){return s.onStepButtonClick(s.stepperSteps.FirstStep)}),e.qZA()(),e.TgZ(3,"span",1)(4,"button",3),e.NdJ("click",function(){return s.onStepButtonClick(s.stepperSteps.SecondStep)}),e.qZA()(),e.TgZ(5,"button",4),e.NdJ("click",function(){return s.onStepButtonClick(s.stepperSteps.ThirdStep)}),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("ngClass",e.VKq(5,m,s.stepperService.stepperConfig().activeStep===s.stepperSteps.FirstStep)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,m,s.stepperService.stepperConfig().activeStep===s.stepperSteps.SecondStep))("disabled",s.stepperService.stepperConfig().isSecondStepDisabled),e.xp6(1),e.Q6J("ngClass",e.VKq(9,m,s.stepperService.stepperConfig().activeStep===s.stepperSteps.ThirdStep))("disabled",s.stepperService.stepperConfig().isThirdStepDisabled))},dependencies:[d.ez,d.mk],styles:['.stepper__wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:24px 0}.stepper__step[_ngcontent-%COMP%]{width:40px;height:40px}.stepper__step[_ngcontent-%COMP%]:disabled{cursor:not-allowed}.stepper__divider[_ngcontent-%COMP%]{flex-grow:1;position:relative;height:40px}.stepper__divider[_ngcontent-%COMP%]:before{content:"";position:absolute;width:calc(100% - 54px);height:1px;top:50%;left:44px;background-color:#a5a8ba}.first-step.active-step[_ngcontent-%COMP%]{background-image:url(/assets/icons/first-step-active.svg)}.first-step.error-step[_ngcontent-%COMP%]{background-image:url(/assets/icons/step-error.svg)}.second-step.active-step[_ngcontent-%COMP%]{background-image:url(/assets/icons/second-step-active.svg)}.second-step[_ngcontent-%COMP%]:disabled{background-image:url(/assets/icons/second-step-disabled.svg)}.third-step.active-step[_ngcontent-%COMP%]{background-image:url(/assets/icons/third-step-active.svg)}.third-step[_ngcontent-%COMP%]:disabled{background-image:url(/assets/icons/third-step-disabled.svg)}.passed-step[_ngcontent-%COMP%]{background-image:url(/assets/icons/step-passed.svg)}']})}return i})();var Z=o(8954),u=o(5981),U=o(8050);let A=(()=>{class i{constructor(){this.linkToCatalog=`/${a.zV.Main}/${a.zV.Contact}`,this.linkToProfile=`/${a.zV.Main}/${a.zV.ProfileSettings}/${a.zV.Info}`}static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["epm-auth-success"]],standalone:!0,features:[e.jDz],decls:9,vars:2,consts:[[1,"success-message__wrapper"],[1,"success-message__title"],[1,"success-message__subtitle"],[1,"button-link",3,"routerLink"],[1,"button-link","link-secondary",3,"routerLink"]],template:function(n,s){1&n&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2,"Account created"),e.qZA(),e.TgZ(3,"h3",2),e._uU(4,"Fill in your profile details to introduce yourself to other U-pamers."),e.qZA()(),e.TgZ(5,"a",3),e._uU(6,"Fill in profile details"),e.qZA(),e.TgZ(7,"a",4),e._uU(8,"Go to the Catalog"),e.qZA()),2&n&&(e.xp6(5),e.Q6J("routerLink",s.linkToProfile),e.xp6(2),e.Q6J("routerLink",s.linkToCatalog))},dependencies:[d.ez,g.rH],styles:[".success-message__wrapper[_ngcontent-%COMP%]{padding-top:242px;margin-bottom:32px;width:100%;background-repeat:no-repeat;background-position:top 98px center;background-image:url(success.604ed8a33623b63a.svg)}.success-message__title[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:700;font-size:24px;line-height:1.4;text-align:center;color:#2c2c2d}.success-message__subtitle[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500;margin:8px 0 0;font-size:16px;line-height:1.5;text-align:center;color:#65697e}.button-link[_ngcontent-%COMP%]{margin-bottom:12px}"]})}return i})();var F=o(5714),M=o(2333),N=o(9834),w=o(1347);const O=["avatarInput"],J=["modal"];function I(i,l){1&i&&(e.TgZ(0,"p",12),e._uU(1," Create a strong password that is at least 8 characters long, includes upper-case, lower-case letters, at least 1 digit and 1 special character. "),e.qZA())}function Q(i,l){if(1&i&&(e.TgZ(0,"h2",5),e._uU(1,"Fill in account details"),e.qZA(),e.TgZ(2,"div",6),e._UZ(3,"epm-input",7)(4,"epm-error-message",8),e.qZA(),e.TgZ(5,"div",6),e._UZ(6,"epm-input",9)(7,"epm-error-message",8),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"epm-input",9)(10,"epm-error-message",8),e.qZA(),e.TgZ(11,"div",6),e._UZ(12,"epm-input",7)(13,"epm-error-message",8),e.YNc(14,I,2,0,"p",10),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"epm-input",7)(17,"epm-error-message",8),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("labelPlaceholder","Login *")("type",t.inputTypes.Email)("control",t.email),e.xp6(1),e.Q6J("control",t.email),e.xp6(2),e.Q6J("labelPlaceholder","First name *")("control",t.givenName),e.xp6(1),e.Q6J("control",t.givenName),e.xp6(2),e.Q6J("labelPlaceholder","Last name *")("control",t.familyName),e.xp6(1),e.Q6J("control",t.familyName),e.xp6(2),e.Q6J("labelPlaceholder","Password *")("type",t.inputTypes.Password)("control",t.password),e.xp6(1),e.Q6J("control",t.password),e.xp6(1),e.um2(14,t.password.pristine||t.password.valid?14:-1),e.xp6(2),e.Q6J("labelPlaceholder","Confirm password *")("type",t.inputTypes.Password)("control",t.repeatPassword),e.xp6(1),e.Q6J("control",t.repeatPassword)}}function V(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"epm-button",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(3);return e.KtG(s.handleAvatarEdit())}),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("iconName",t.iconNames.Edit)}}function z(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"h2",5),e._uU(1,"Upload profile picture"),e.qZA(),e.TgZ(2,"p",13),e._uU(3,"(Optional)"),e.qZA(),e.TgZ(4,"label",14),e._UZ(5,"img",15),e.TgZ(6,"input",16,17),e.NdJ("change",function(s){e.CHM(t);const r=e.oxw(2);return e.KtG(r.handleAvatarEdit(s))}),e.qZA(),e.YNc(8,V,1,1,"epm-button",18),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("src",t.userAvatarDraft(),e.LSH),e.xp6(1),e.Q6J("type",t.inputTypes.File),e.xp6(2),e.um2(8,t.userAvatarDraft()?8:-1)}}function D(i,l){if(1&i&&(e.TgZ(0,"h2",5),e._uU(1,"Connect social medias"),e.qZA(),e.TgZ(2,"p",13),e._uU(3,"(Optional)"),e.qZA(),e._UZ(4,"epm-input",20)(5,"epm-input",20)(6,"epm-input",20)(7,"epm-input",20)(8,"epm-input",21)),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("labelPlaceholder",t.socialPlaceholders.linkedin)("iconName",t.socialIcons.LinkedIn)("control",t.linkedin),e.xp6(1),e.Q6J("labelPlaceholder",t.socialPlaceholders.instagram)("iconName",t.socialIcons.Instagram)("control",t.instagram),e.xp6(1),e.Q6J("labelPlaceholder",t.socialPlaceholders.telegram)("iconName",t.socialIcons.Telegram)("control",t.telegram),e.xp6(1),e.Q6J("labelPlaceholder",t.socialPlaceholders.facebook)("iconName",t.socialIcons.Facebook)("control",t.facebook),e.xp6(1),e.Q6J("labelPlaceholder",t.socialPlaceholders.skype)("iconName",t.socialIcons.Skype)("control",t.skype)}}const L=(i,l)=>["/",i,l];function B(i,l){if(1&i&&(e.TgZ(0,"p",22),e._uU(1," Already have an account? "),e.TgZ(2,"a",23),e._uU(3,"Login"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("routerLink",e.WLB(1,L,t.appRoutes.Auth,t.appRoutes.LogIn))}}function R(i,l){if(1&i){const t=e.EpF();e._UZ(0,"epm-stepper"),e.TgZ(1,"form",2),e.YNc(2,Q,18,19)(3,z,9,3)(4,D,9,15),e.qZA(),e.TgZ(5,"epm-button",3),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onNextStepClick())}),e._uU(6),e.qZA(),e.YNc(7,B,4,4,"p",4)}if(2&i){const t=e.oxw();let n;e.xp6(1),e.Q6J("formGroup",t.registerForm),e.xp6(1),e.um2(2,(n=t.currentStep().activeStep)===t.stepperSteps.FirstStep?2:n===t.stepperSteps.SecondStep?3:n===t.stepperSteps.ThirdStep?4:-1),e.xp6(3),e.Q6J("isDisabled",!t.isFormValid),e.xp6(1),e.hij(" ",t.nextStepButtonValue,"\n"),e.xp6(1),e.um2(7,t.currentStep().activeStep===t.stepperSteps.FirstStep?7:-1)}}function E(i,l){1&i&&e._UZ(0,"epm-auth-success")}let Y=(()=>{class i{constructor(t,n,s,r,h,f,j,q){this.stepperService=t,this.authService=n,this.injector=s,this.cdr=r,this.fb=h,this.router=f,this.cognitoService=j,this.avatarService=q,this.nextStepButtonValue=c.iP.Continue,this.isRegisterFormSubmitted=!1,this.stepperSteps=c.xb,this.nextButtonConfig=c.iP,this.appRoutes=a.zV,this.inputTypes=a.Ar,this.iconNames=a.gv,this.userAvatarDraft=this.avatarService.userAvatarDraft,this.currentStep=this.stepperService.stepperConfig,this.socialIcons=a.hQ,this.socialPlaceholders=a.mU,this.modalConfig=a.xi}get email(){return this.registerForm.get("email")}get givenName(){return this.registerForm.get("givenName")}get familyName(){return this.registerForm.get("familyName")}get password(){return this.registerForm.get("password")}get repeatPassword(){return this.registerForm.get("repeatPassword")}get avatar(){return this.registerForm.get("avatar")}get linkedin(){return this.registerForm.get("socialMedia.linkedin")}get instagram(){return this.registerForm.get("socialMedia.instagram")}get telegram(){return this.registerForm.get("socialMedia.telegram")}get facebook(){return this.registerForm.get("socialMedia.facebook")}get skype(){return this.registerForm.get("socialMedia.skype")}get isFormValid(){return this.currentStep().activeStep!==this.stepperSteps.FirstStep||this.registerForm.valid}ngOnInit(){this.buildRegisterForm(),this.getNextStepButtonValue(),this.handleUserAvatarControl()}onNextStepClick(){this.authService.saveFormValue(this.registerForm.value),this.getNextStepHandler(this.stepperService.stepperConfig().activeStep)()}handleAvatarEdit(t){const n=t||this.avatarService.fileEventDraft();this.avatarService.setImageChangeEvent(n),this.router.navigateByUrl(`/${this.appRoutes.Main}/${this.appRoutes.AvatarEdit}`)}canDeactivate(t){return!!this.isRouteLeaveCondition(t)||(this.modal.openModal(),(0,b.D)(this.modal.secondaryButton).pipe((0,k.U)(()=>!0),(0,v.b)(()=>this.resetAuthSettings()),(0,C.q)(1)))}isRouteLeaveCondition(t){return this.isRegisterFormSubmitted||this.registerForm.pristine||t.url===`/${this.appRoutes.Main}/${this.appRoutes.AvatarEdit}`}getNextStepButtonValue(){(0,e.cEC)(()=>{this.nextStepButtonValue=this.stepperService.stepperConfig().activeStep===this.stepperSteps.ThirdStep?this.nextButtonConfig.CreateAccount:this.nextButtonConfig.Continue},{injector:this.injector}),this.cdr.detectChanges()}handleUserAvatarControl(){(0,e.cEC)(()=>{this.avatar.setValue(this.avatarService.userAvatarDraft())},{injector:this.injector})}buildRegisterForm(){this.registerForm=this.fb.group({email:["",{validators:[p.kI.required,p.kI.email]}],givenName:["",{validators:[p.kI.required,u.d.userName()]}],familyName:["",{validators:[p.kI.required,u.d.userName()]}],password:["",{validators:[p.kI.required,p.kI.minLength(8),u.d.password()]}],repeatPassword:["",{validators:[p.kI.required]}],avatar:[""],socialMedia:this.fb.group({linkedin:[""],instagram:[""],telegram:[""],facebook:[""],skype:[""]})},{validators:[u.d.matchControlsValue("samePasswordsValue",c.HF.Password,c.HF.RepeatPassword)]})}getNextStepHandler(t){return{firstStep:this.onSecondStepClick.bind(this),secondStep:this.onThirdStepClick.bind(this),thirdStep:this.onCreateAccountClick.bind(this)}[t]}onSecondStepClick(){this.cognitoSignUpAndSignInUser(),this.stepperService.stepperConfig.update(t=>({...t,activeStep:c.xb.SecondStep,isSecondStepDisabled:!1}))}onThirdStepClick(){this.stepperService.stepperConfig.update(t=>({...t,activeStep:c.xb.ThirdStep,isThirdStepDisabled:!1}))}onCreateAccountClick(){const{givenName:t,familyName:n,email:s,avatar:r,socialMedia:h}=this.authService.getDraftFormValue(),f={...a.Qh,name:`${t} ${n}`,email:s.toLowerCase(),avatar:r,socialMedia:h};this.authService.createUser(f).pipe((0,v.b)(()=>{this.isRegisterFormSubmitted=!0,this.resetAuthSettings()}),(0,S.K)(()=>this.router.navigateByUrl(`/${this.appRoutes.NotFound}`))).subscribe()}cognitoSignUpAndSignInUser(){const t=this.authService.getDraftFormValue();this.cognitoService.signUp(t).pipe((0,P.w)(()=>this.cognitoService.signIn(t)),(0,C.q)(1),(0,S.K)(()=>this.router.navigateByUrl(`/${a.zV.NotFound}`))).subscribe()}resetAuthSettings(){this.stepperService.stepperConfig.set(c.wd),this.authService.resetDraftFormValue(),this.avatarService.setUserAvatarDraft("")}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x),e.Y36(M.e),e.Y36(e.zs3),e.Y36(e.sBO),e.Y36(p.j3),e.Y36(g.F0),e.Y36(N.A),e.Y36(w.o))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["epm-sign-up"]],viewQuery:function(n,s){if(1&n&&(e.Gf(O,5),e.Gf(J,5)),2&n){let r;e.iGM(r=e.CRH())&&(s.avatarInput=r.first),e.iGM(r=e.CRH())&&(s.modal=r.first)}},standalone:!0,features:[e.jDz],decls:5,vars:2,consts:[[3,"modalConfig"],["modal",""],[1,"signup__form",3,"formGroup"],[1,"primary",3,"isDisabled","click"],["class","signup__login-paragraph"],[1,"signup__title"],[1,"signup__field"],[3,"labelPlaceholder","type","control"],[3,"control"],[3,"labelPlaceholder","control"],["class","signup__footnote"],[1,"signup__field","last-field"],[1,"signup__footnote"],[1,"signup__informer"],[1,"signup__avatar-container","last-field"],["alt","user avatar",1,"signup__avatar-image",3,"src"],["accept",".png, .jpg, .jpeg",3,"type","change"],["avatarInput",""],["class","primary",3,"iconName"],[1,"primary",3,"iconName","click"],[1,"signup__field",3,"labelPlaceholder","iconName","control"],[1,"signup__field","last-field",3,"labelPlaceholder","iconName","control"],[1,"signup__login-paragraph"],[1,"signup__login-link",3,"routerLink"]],template:function(n,s){1&n&&(e._UZ(0,"router-outlet"),e.YNc(1,R,8,5)(2,E,1,0),e._UZ(3,"epm-modal",0,1)),2&n&&(e.xp6(1),e.um2(1,s.isRegisterFormSubmitted?2:1),e.xp6(2),e.Q6J("modalConfig",s.modalConfig))},dependencies:[d.ez,y,Z.c,T.o,p.UX,p._Y,p.JL,p.sg,g.Bz,g.lC,g.rH,U.m,A,F.L],styles:["[_nghost-%COMP%]{display:block;min-height:calc(100vh - 56px);padding:0 16px}.signup__title[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:700;margin-bottom:4px;font-size:24px;line-height:34px;text-align:center;color:#1f1f26}.signup__informer[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:300;margin-bottom:24px;font-size:14px;line-height:20px;text-align:center;color:#65697e}.signup__form[_ngcontent-%COMP%]   epm-input[_ngcontent-%COMP%]{height:52px}.signup__field[_ngcontent-%COMP%]{margin-bottom:16px}.signup__field[_ngcontent-%COMP%]   epm-error-message[_ngcontent-%COMP%]{padding:4px 0}.signup__footnote[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:400;padding:4px 0;font-size:12px;line-height:18px;color:#2c2c2d}.signup__login-paragraph[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500;margin:12px 0;line-height:24px;text-align:center}.signup__login-link[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:600;color:#0078ff}.signup__login-link[_ngcontent-%COMP%]:visited{color:#6b4eff}.signup__avatar-container[_ngcontent-%COMP%]{position:relative;display:flex;width:160px;height:160px;margin:0 auto;cursor:pointer;background-image:url(avatar-upload.a2d394f8a9695f93.svg);background-position:center;background-size:cover;border-radius:50%}.signup__avatar-container[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.signup__avatar-container[_ngcontent-%COMP%]  .button{position:absolute;width:auto;height:40px;padding:10px 8px;bottom:4px;right:4px}.signup__avatar-image[_ngcontent-%COMP%]{color:transparent;border-radius:50%}.last-field[_ngcontent-%COMP%]{margin-bottom:32px}"]})}return i})()}}]);